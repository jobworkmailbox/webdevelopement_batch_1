<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Java Script</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	</head>
	<body>
		<!--Top Headlines-->
		<section>
			<div class="container-fluid">
				<div class="row">
					<div class="alert alert-primary" role="alert">
						<h3>Top Headings</h3>
					</div>
				</div>
				<div class="row" id="topNews"></div>
			</div>
		</section>
		<script>
			const apikey = "843c3a79f8824e7bb3f91570ad5c81ad";
			let apiValues = [];
			async function doApICall() {
				const { data: dataValues } = await axios.get(`https://newsapi.org/v2/top-headlines?country=in&category=business&apiKey=${apikey}`);
				//console.log(data.data.articles);
				console.log(dataValues);
				apiValues = dataValues?.articles;
				getNewsArr(dataValues?.articles);
			}
			doApICall();
			let TopNewsUi = document.getElementById("topNews");
			let SendNewsToUi = ``;
			function getNewsArr(articles) {
				if (articles && articles.length) {
					articles.map((values, index) => {
						console.log(values, TopNewsUi);
						SendNewsToUi += `
                        <div class="col-sm-12 col-md-3">
                        <div class="card">
                         <img src=${values.urlToImage} class="card-img-top" alt=${values.title}>
                                <div class="card-body">
                                    <h5 class="card-title">${values.title}</h5>
                                         <p class="card-text">${values.description}</p>
                                             <a href=${values.url} target="_blank" class="btn btn-primary">View Source</a>
                                </div>
                        </div></div>`;
					});
				}
			}

			setTimeout(() => {
				console.log(SendNewsToUi);
				TopNewsUi.innerHTML = SendNewsToUi;
			}, 5000);
		</script>
	</body>
</html>
